<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eBazer - Tailwind CSS eCommerce Admin Template</title>
    <link rel="shortcut icon" href="assets/img/logo/favicon.png" type="image/x-icon">

    <!-- css links -->
    <link rel="stylesheet" href="assets/css/perfect-scrollbar.css">
    <link rel="stylesheet" href="assets/css/choices.css">
    <link rel="stylesheet" href="assets/css/apexcharts.css">
    <link rel="stylesheet" href="assets/css/quill.css">
    <link rel="stylesheet" href="assets/css/rangeslider.css">
    <link rel="stylesheet" href="assets/css/custom.css">
    <link rel="stylesheet" href="assets/css/main.css">
</head>
<body>

    <!--  -->
    <div class="tp-main-wrapper h-screen">
        <div class="container mx-auto my-auto h-full flex items-center justify-center">
            <div class="pt-[120px] pb-[120px]">
                <div class="grid grid-cols-12 shadow-lg bg-white overflow-hidden rounded-md ">
                    <div class="col-span-4 lg:col-span-6 relative h-full hidden lg:block">
                        <div class="data-bg absolute top-0 left-0 w-full h-full bg-cover bg-no-repeat" data-bg="assets/img/bg/login-bg.jpg"></div>
                    </div>
                    <div class="col-span-12 lg:col-span-6 md:w-[500px] mx-auto my-auto  pt-[50px] py-[60px] px-5 md:px-[60px]">
                        <div class="text-center">
                            <h4 class="text-[24px] mb-1">Login Now.</h4>
                            <div id="login-error" class="text-red-500 text-sm mt-2 hidden"></div>
                        </div>

                        <div class="">
    <!-- Rewritten for stability -->
    <div id="login-form-container">
        <div class="mb-5">
            <p class="mb-0 text-base text-black">Email <span class="text-red">*</span></p>
            <input id="email" class="input w-full h-[49px] rounded-md border border-gray6 px-6 text-base" type="email" placeholder="Enter Your Email" value="admin@ebazer.com">
        </div>
        <div class="mb-5">
            <p class="mb-0 text-base text-black">Password <span class="text-red">*</span></p>
            <input id="password" class="input w-full h-[49px] rounded-md border border-gray6 px-6 text-base" type="password" placeholder="Password" value="password123">
        </div>
        <div class="flex items-center justify-between">
            <div class="tp-checkbox flex items-start space-x-2 mb-3">
                <input id="product-1" type="checkbox">
                <label for="product-1" class="text-tiny">Remember Me</label>
            </div>
            <div class="mb-4">
                <a href="forgot.html" class="text-tiny font-medium text-theme border-b border-transparent hover:border-theme">Forgot Password ?</a>
            </div>
        </div>
        <button id="login-btn" type="button" class="tp-btn h-[49px] w-full justify-center" onclick="handleLogin()">Sign In</button>
    </div>

    <!-- Inlined JS for Debugging -->
    <!-- External Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="assets/js/api.js"></script> <!-- Adapter -->
    <script src="assets/js/auth.js"></script> <!-- Auth Logic -->

    <script>
        // Init
        document.addEventListener('DOMContentLoaded', () => {
             // Clear error on load
            const errorDiv = document.getElementById('login-error');
            if(errorDiv) errorDiv.classList.add('hidden');
        });

        async function handleLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const submitBtn = document.getElementById('login-btn');
            const errorDiv = document.getElementById('login-error');

            if (!email || !password) {
                if(errorDiv) {
                    errorDiv.innerText = 'Please enter email and password';
                    errorDiv.classList.remove('hidden');
                }
                return;
            }

            submitBtn.textContent = 'Signing In...';
            submitBtn.disabled = true;
            if(errorDiv) errorDiv.classList.add('hidden');

            try {
                // Use the centralized auth logic
                const success = await auth.login(email, password);
                if (success) {
                    window.location.href = 'index.html';
                } else {
                    // Start failing
                    if(errorDiv) {
                        errorDiv.innerText = 'Invalid credentials';
                        errorDiv.classList.remove('hidden');
                    }
                     submitBtn.textContent = 'Sign In';
                     submitBtn.disabled = false;
                }
            } catch (err) {
                 console.error(err);
                 if(errorDiv) {
                    errorDiv.innerText = 'Login Failed';
                    errorDiv.classList.remove('hidden');
                 }
                 submitBtn.textContent = 'Sign In';
                 submitBtn.disabled = false;
            }
        }
    </script>
</html>